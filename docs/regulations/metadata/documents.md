---
sidebar_position: 7
sidebar_label: Документы
title: Документы
---
## Проведение документа

Если в конфигурации проведение реализовано через учетные механизмы тогда нужно придерживаться данного подхода. Описание:

* [Доработка проведения в ERP 2.5. (Регистры накопления, Регистры сведений)](https://infostart.ru/1c/articles/1343740/)

* [Механизм проведения документов в ERP 2.5](https://www.youtube.com/watch?v=5I-ZwiNjj0I)

В других случаях использовать проведение из **БПР,** описано в разделе [“Проведение документов“.](../../psl/carrying_out_documents.md)

Добавляем каркас проведения согласно **БПР** всегда даже когда документ на текущий момент не предполагает движений.

## Удаление движений

Приоритет отдается режиму **"Не удалять автоматически**". В этом случае требуется реализация собственного кода удаления движений через обработчики событий. В типовых конфигурациях 1С это делается через вызов метода "**ПроведениеДокументов.ПриЗаписиДокумента**" в событие **ПриЗаписи**. Такой подход оптимален по производительности и гибкости логики. <u>Актуально для конфигураций в которых реализация проведения идет через учетные механизмы.</u>

* Проведение документов нужно выстраивать на типовых учетных механизмах. Это модуль **ПроведениеДокументов.** Для единообразия сразу использовать отмену проведения данного модуля.

* Исключить ситуацию, когда может появиться отмена проведения при записи (например, связанная с записями в регистры сведений) и при этом стоит режим автоматического удаления, получится двойная очистка, лишние затраты ресурсов , увеличение транзакции.

Режим **"Удалять автоматически при отмене проведения"** хорош для баланса скорости работы и объёма данных. Дополнительные блокировки только при отмене проведений.

Режим **"Удалять автоматически"** может приводить к проблемам из-за увеличения длительности транзакций т.к блокировка данных будет дольше по времени. Его имеет смысл использовать только при крайней необходимости.

Материалы:

* [Влияние режима удаления движений на производительность](https://infostart.ru/1c/articles/202199/)

* [Автоматическое удаление движений](https://its.1c.ru/db/pubapplied/content/191/hdoc)

* [Свойство «Удаление движений» объекта конфигурации](https://its.1c.ru/db/pubapplied/content/77/hdoc)

## Префиксация

Новый документ должен иметь префиксацию также как и типовые документы.

Пример решение: cоздать подписку на события **рздПриУстановкеНовогоНомераДокументаПоОрганизации** метод **ПрефиксацияОбъектовСобытия.УстановитьПрефиксИнформационнойБазыИОрганизации** (метод может отличаться в типовых конфигурациях).

Также создать подписку **рздПроверитьНомерДокументаПоДатеИОрганизации** событие **ПередЗаписью** на метод **ПрефиксацияОбъектовСобытия.ПроверитьНомерДокументаПоДатеИОрганизации**

## БСП

Новый документ должен быть подключен к следующему функционалу:

1. [Подключаемые команды](https://its.1c.ru/db/bsp319doc#content:4:hdoc:issogl2_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B038) (форма документа и списка)

    Методы должны располагаться в области **СлужебныеПроцедурыИФункции** внутри области **ПодключаемыеКоманды**

2. [Отчет о движениях документа](https://its.1c.ru/db/bsp319doc#content:4:hdoc:issogl2_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B035) (проверить после п.1 что он появился)

3. [Версионирование](https://its.1c.ru/db/bsp319doc#content:4:hdoc:issogl2_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B08)
   
   * Создать подписку на событие **рздЗаписатьВерсиюДокумента** на метод **ВерсионированиеОбъектовСобытия.ЗаписатьВерсиюДокумента** (уточнить по документации)
   
   * Расширить определяемый тип **ВерсионируемыеДанные**

4. [Дата запрета](https://its.1c.ru/db/bsp319doc#content:4:hdoc:issogl2_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B013)
   
   * Создать подписку на событие для документов **рздПроверитьДатуЗапретаИзмененияПередЗаписьюДокумента** на метод **ДатыЗапретаИзменения.ПроверитьДатуЗапретаИзмененияПередЗаписьюДокумента**
   
   * Создать подписку на событие для документов **рздПроверитьДатуЗапретаИзмененияПередУдалениемна** метод **ДатыЗапретаИзменения.ПроверитьДатуЗапретаИзмененияПередУдалением**
   
   * В методе **рздМодификацияКонфигурацииСервер.ЗаполнитьИсточникиДанныхДляПроверкиЗапретаИзменения** реализовать заполнение для нового документа.
   <u>Методы уточнить в документации</u>
   
   * Если подключается дата запрета нужно не забыть подключить типовую блокировку форм, см. регламент [Блокировка форма](../blocking_forms.md).

## Формы

Формы документов должны придерживаться стилистики типовых документов (пример **ERP**). Следовать стандартам раздела [Формы документов.](https://its.1c.ru/db/v8std#browse:13:-1:7:9)

1. Разделять реквизиты шапки и табличных частей на отдельные вкладки: Основное (реквизиты шапки), Товары (табличная часть товары)
2. У страницы с табличной частью должно быть заполнено свойство **ПутьКДаннымЗаголовка** (Объект.Товары.КоличествоСтрок)

## Реквизиты

Стандартному реквизиту **Номер** длину устанавливать **11**.

Документ должен содержать следующие реквизиты:

* Организация (как минимум для префиксации и РЛС)

* Комментарий

* Ответственный

## Обработка заполнения

Реквизиты по умолчанию должны заполняться в обработке заполнения (например, ответственный).

## Роли

На документ должны быть созданы роли согласно регламенту “[Роли](roles.md)“.

## Подсистемы

Новый объект должен быть размещен в подсистемы согласно регламенту “[Подсистемы](subsystem.md)“. Если в техническом решении не прописано пользовательское размещение тогда объект добавляется только в служебную подсистему.

## Специфика по конфигурациям

### ЗУП

1. Оперативное проведение = Запретить

2. Формат стандартного реквизита **Дата**: ДЛФ=D. Ширина элемента на форме = 9

![image.png](./img/zup_data.png)